# 쿠키, 세션 스토리지, 로컬 스토리지

## 쿠키

- 서버와 클라이언트 간의 상태 정보를 저장하고 공유하는데 사용되는 `키와 값(Key/Value)`으로 구성된 작은 텍스트파일

- 클라이언트의 로컬 (브라우저 메모리 혹은 하드디스크)에 저장
- 최대 4KB로 크기 제한 → 용량이 작은 데이터에 적합
- 클라이언트에 300개까지 쿠키를 저장 가능하며, 하나의 도메인당 20개의 값만 가질 수 있다.
- 만료일(유효 시간) 설정 가능 - 기본 설정: 브라우저가 닫힐 때 삭제
- 쿠키는 사용자가 따로 요청하지 않아도 브라우저가 Request 시에 Request Header를 넣어서 자동으로 서버에 매번 전송
- 사용자의 로그인 정보, 세션 정보, 장바구니 항목 등을 저장하고 유지

### 특징

- 대부분의 브라우저가 지원
- 보안에 취약
  - 공공장소에서 로그인할 때 쿠키 사용 시 개인정보 해킹 가능성
- 유효 시간동안 보관
  - 유효 시간이 있을 경우 브라우저가 닫혀도 유지가 된다.
- 서버 부담
  - 매 HTTP 요청마다 포함되어 서버로 전송

<br/>

## 웹 스토리지(Web Storage)

- HTML5의 클라이언트 데이터 저장소
- `키와 값(Key/Value)`의 형태로 데이터를 저장
- 필요한 경우에만 꺼내 씀 → 자동 전송의 위험X
- 도메인 단위로 접근 제한 (CSRF 안전)
- 대략 5MB까지의 데이터를 저장 가능

### 세션 스토리지

- `window.sessionStorage` 객체
- `탭/윈도우 단위`로 세션 스토리지가 생성
  - window 객체와 동일한 유효 범위 및 생존 기간
  - `탭/윈도우를 닫을 시 데이터 삭제`
- 동일한 탭/윈도우라도 다른 도메인이라면 또 다른 세션 스토리지가 생성
- 서로 다른 세션 스토리지는 서로 영향을 주지 않으며 `독립적`으로 동작
- 윈도우 복제로 생성된 경우, 혹은 스크립트로 새 창을 연 경우, 세션 스토리지가 `복제`되어 생성
- 잠시 동안 필요한 정보`(일회성 정보)` 저장(ex. 입력 폼 저장, 일회성 로그인)

### 로컬 스토리지

- `window.localStorage` 객체
- 브라우저를 종료해도 유지되는 데이터로, 명시적으로 지우지 않는 한 `영구적으로 저장`
- `도메인별`로 생성 & 다른 도메인의 로컬 스토리지에는 접근 불가능
- 서로 다른 브라우저 탭이라도 동일한 도메인이라면 동일한 로컬 스토리지 사용
- 지속적으로 필요한 정보를 저장 (ex. 자동 로그인)

<br />
<hr/>
<br />

### 쿠키와 세션스토리지, 로컬스토리지 공통점

- 웹 브라우저에 저장: 모두 웹 브라우저에 데이터를 저장하며, 사용자가 저장한 데이터에 대한 접근과 수정 가능

- 키-값 쌍(Key-value pair) 형식: 쿠키와 웹 스토리지(세션 스토리지와 로컬 스토리지)는 모두 키(key)와 값(value)의 쌍으로 데이터를 저장 → 특정 키에 대한 값을 쉽게 추가, 수정, 검색 및 삭제 가능

- 도메인 및 경로 제한: 쿠키와 웹 스토리지 모두 읽기 및 쓰기 작업이 생성된 도메인 및 경로내에서만 가능한 데이터 저장 구조 → 사용자 데이터를 더 안전하게 보호

<br/>

### 쿠키와 세션스토리지, 로컬스토리지 차이점

- 쿠키: 서버가 클라이언트에 제공하는 작은 데이터 파일 → 매번 http 요청 시 헤더에 담겨서 서버에 전송(서버 부담), 만료 기간 존재, 매우 작은 데이터 저장 용량(4kb)

- 웹 스토리지(세션 스토리지, 로컬 스토리지): 클라이언트에 저장, HTML5부터 나온 새로운 방식의 데이터 저장소

- 세션 스토리지: 탭 윈도우 단위로 생성, 탭 윈도우를 닫을 때 데이터가 삭제
- 로컬 스토리지 - 브라우저 자체에 반영구적으로 저장 브라우저 종료해도 데이터 저장

<br/>

### 쿠키와 세션스토리지, 로컬스토리지 사용

- 쿠키 : 다시 보지 않음 팝업창, 로그인 자동 완성
- 세션스토리지 : 일회성 로그인, 입력 폼 저장, 비로그인 장바구니
- 로컬스토리지 : 자동 로그인
