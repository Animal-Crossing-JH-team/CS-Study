# SSR & CSR

## SSR

Server Side Rendering의 약자.

말 그대로 서버쪽에서 렌더링 준비를 끝마친 상태로 클라이언트에 전달하는 방식

1. 유저가 웹사이트 요청을 보냄.
2. 서버는 즉시 렌더링 가능한 html파일을 만든다. (리소스 체크, 컴파일 후 완성된 HTML 컨텐츠로 만든다.)
3. 클라이언트에 전달되는 순간, 이미 렌더링 준비가 되어있기 때문에 HTML은 즉시 렌더링 된다. 그러나 사이트 자체는 조작 불가능함. (JS가 읽히기 전이기 때문)
4. 클라이언트가 자바스크립트를 다운.
5. 다운 받아지고 있는 사이에 유저는 컨텐츠는 볼 수 있지만 사이트를 조작 할 수는 없다. 이때의 사용자 조작을 기억하고 있는다.
6. 브라우저가 Javascript 프레임워크를 실행.
7. JS까지 성공적으로 컴파일 되었기 때문에 기억하고 있던 사용자 조작이 실행되고 이제 웹 페이지는 상호작용 가능해짐.

<img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FdGCZHY%2FbtrcOfdcohI%2FDKF2Cr2HHW5X8vNSaexEpK%2Fimg.png">

<hr>

## CSR

Client Side Rendering의 약자.

말 그대로 SSR과 달리 렌더링이 클라이언트 쪽에서 일어나는 방식.
즉, 서버는 요청을 받으면 클라이언트에 HTML과 JS를 보내준다. 클라이언트는 이를 받아 렌더링을 시작한다.

1. 유저가 웹사이트 요청을 보냄.
2. CDN이 HTML 파일과 JS로 접근할 수 있는 링크를 클라이언트로 보낸다.
   - CDN이란 엔드 유저의 요청에 '물리적'으로 가까운 서버에서 요청에 응답하는 방식을 말함.
3. 클라이언트는 HTML과 JS를 다운로드함. (이때 SSR과 달리 유저는 아무것도 볼 수 없음)
4. 다운이 완료된 JS가 실행 -> 데이터를 위한 API가 호출 (이때 유저들은 placeholder를 보게됨)
5. 서버가 API로부터의 요청에 응답.
6. API로부터 받아온 data를 placeholder 자리에 넣어줌. -> 페이지 상호 작용 가능

<img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FbkJ0my%2FbtrcOM9GT1V%2FaKDCRhm77MfHF8ushplGi0%2Fimg.png">

<hr>

## SSR, CSR의 차이?

### 웹페이지를 로딩하는 시간

- 첫 페이지 로딩
  - CSR의 경우 HTML, CSS와 모든 스크립트들을 한 번에 불러옴, 반면 SSR은 필요한 부분의 HTML과 스크립트만 불러오게 되므로 평균적으로 SSR이 더 빠르다.
- 나머지 로딩
  - 첫 페이지를 로딩한 후, 사이트의 다른 곳으로 이동하는 경우, CSR은 이미 첫 페이지 로딩할 때 나머지 부분을 구성하는 코드를 받아왔기 때문에 빠르다. 반면, SSR은 첫 페이지를 로딩한 과정을 정확하게 다시 실행하므로 이 경우에는 CSR이 더 빠르다.

### SEO 대응

검색 엔진은 자동화된 로봇인 '크롤러'로 웹 사이트들을 읽는다.

(대부분의 웹 크롤러, 봇들은 JS를 실행시키지 못하고 HTML에서만 컨텐츠를 수집하기 때문에
CSR 방식으로 개발된 페이지를 빈 페이지로 인식하게 된다. 반면 SSR 방식은 View를 서버에서 전부 렌더링하기 때문에 HTML에 모든 컨텐츠가 저장되어 있어 SEO를 사용하는데 문제가 없다.)

CSR은 자바스크립트를 실행시켜 동적으로 컨텐츠가 생성되기 때문에 자바스크립트가 실행 되어야 meatadata가 바뀌었다.
(이전 크롤러들은 자바스크립트를 실행시키지 않았었기에 SEO 최적화가 필수적이었다. 구글이 그 트렌드를 바꾸고 있다고 한다.)

SSR은 애초에 서버 사이드에서 컴파일되어 클라이언트로 넘어오기 때문에 크롤러에 대응하기 용이하다.

## 사용?

상황에 따라 적합한 방식을 사용하는 것이 좋다.

### SSR

- 웹 페이지의 첫 화면 렌더링이 빨라야할 경우
- 웹 페이지와 사용자간에 상호작용이 적은 경우
- SEO가 우선순위인 경우

### CSR

- 웹 애플리케이션 제작을 할 경우 더 나은 사용자 경험 제공 (화면 전환시 깜빡임 등이 없음)
- 사이트와 사용자간에 상호작용이 많이 일어날 경우 (라우팅으로 더 나은 사용자 경험 제공)
- SEO가 우선 순위가 아닌 경우

혹은 `React + Next.js` 조합 처럼 2가지를 모두 챙기는 방식으로 사용할 수도 있다

<hr>

### 참고

- https://proglish.tistory.com/216
