# Hook이란?

Hook은 React 버전 16.8부터 React요소로 새로 추가되었습니다. Hook을 이용하여 기존 Class 바탕의 코드를 작성할 필요 없이 상태 값과 여러 React의 가능을 사용할 수 있습니다.

## 등장 배경

리액트의 컴포넌트는 클래스형과 함수형으로 나눠진다. hook이 나오기 전 까지는 상태값(state)에 접근, 생명주기 기능(lifecycle features)을 사용하기 위해 class형 컴포넌트 선언을 해줘야 했다. 함수형 컴포넌트는 한번 호출되고 메모리상에서 사라져 상태값 접근과 라이프사이클 구현이 불가능했다.

하지만 class형 컴포넌트를 사용했을 때 다음과 같은 문제가 발생했다.

- 컴포넌트간에 로직의 재사용이 불가능하다<br>

  render props나 HOC(High order component, 고차 컴포넌트)와 같은 패턴을 통해 문제를 해결할 수 있지만 이러한 패턴은 코드의 추적을 어렵게 만든다
  계속해서 이런 코드를 사용하게 되다보면 많은 레이어들로 둘러쌓인 wrpper hell을 겪게 된다

- 코드가 복잡해진다
  이런 단점에도 불구하고 상태값 접근과 생명주기 관리 때문에 class형 컴포넌트를 사용해야만 했다.

## Hook의 등장

Hook의 등장으로 함수형 컴포넌트에서 react state와 생명 주기 관리가 연동 가능해졌다.
(Hook은 class 안에서 동작하지 않는다.)

### Hook의 장점

- 컴포넌트로부터 상태 관련 로직을 추상화할 수 있다
  - 이를 이용해 독립적인 재사용이 가능하다
  - 코드의 재사용은 가독성을 높이고 유지보수를 용이하게 한다
- 훅은 계층의 변화 없이 상태 관련 로직을 재사용할 수 있다
- 생명주기 메서드를 기반으로 쪼개는 것 보다는 훅을 통해 작은 함수의 묶음으로 컴포넌트를 나누는 방법을 사용할 수 있다

### Hook 사용 규칙

- 최상위 에서만 훅을 호출해야 한다. 훅을 호출하는 순서는 항상 같아야 한다
  - 반복문, 조건문, 중첩된 함수 내에서 Hook을 사용할 수 없다.
  - 리액트는 훅이 호출된 순서에 의존한다.
- React 함수 컴포넌트 내에서만 Hook을 호출해야 한다.

### 자주 사용하는 Hook

1. useState
   상태를 관리하는 훅으로 현재 상태를 나타내는 state 값과 이 상태를 변경하는 setState값을 한 쌍으로 제공함
2. useEffect
   function에는 실행시킬 함수를 넣고 deps에는 의존성 배열을 담는다.

- 의존성 배열이 없이 실행시키게 되면 페이지가 렌더링 될 때마다 데이터를 불러옴

```js
useEffect(()=> {
 ...
})
```

- 의존성 배열에 빈 배열을 담아주게 될 경우 첫 렌더링 시에만 함수를 실행함

```js
useEffect(()=> {
 ...
},[])
```

- 의존성 배열에 state값이나 props로 상속받은 데이터값 등을 담아주면 해당 값이 변할 때마다 함수를 실행함

```js
useEffect(()=> {
 ...
},[state])
```

3. useRef
   특정 DOM에 접근해 DOM조작을 가능하게 하거나 state가 변경될 때 렌더링 하고싶지 않을 때 state 대신 사용할 수 있다.
4. useMemo, useCallback
