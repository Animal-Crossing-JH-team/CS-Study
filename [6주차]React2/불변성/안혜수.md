# 불변성

상태를 변경할 수 없는 것을 의미함

## 왜 React에서 불변성을 지켜야하나?

리액트가 상태를 업데이트할 때 얕은 비교를 수행하게 되는데 현재 참조값과 이전 참조값을 비교해 상태 변화를 감지한다. 그렇기 때문에 배열이나 객체를 업데이트 할 때 setState([...state,newState]), setState({...state,[key]:value}) 방식으로 새로운 참조값을 가진 배열이나 객체를 생성한다.

사이드 이펙트를 방지할 수 있다. 원본 데이터를 직접 수정하지 않고 복사해온 값을 사용하기 때문에 예상치 못한 오류를 사전에 방지할 수 있다.

## 불변성은 어떻게 지킬까?

원시타입의 경우 값을 변경하면 참조했던 주소가 바뀌기 때문에 쉽게 상태 변경을 감지할 수 있다.

반면 참조 타입은 일부 프로퍼티만 수정할 경우 일관성이 유지되지 않아 상태 변경이 감지되지 않는다. 따라서 spread operator, map, filter, slice, reduce 등등 원본 데이터를 직접 수정하지 않고 새로운 배열을 반환하는 메소드들을 활용하자.

### 라이브러리를 사용한다.

얕은 복사가 아닌 깊은 복사를 해야할 때도 있는데 이때는 변경된 객체만 복사할 수 있어 성능 저하 걱정 없는 immer.js와 같은 라이브러리를 사용하여 쉽게 불변성을 관리할 수 있다.
